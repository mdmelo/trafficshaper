<!DOCTYPE html>
<html>
<head>
    <title>Linux Traffic Shaper</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1>Network Traffic Shaper</h1>
    <!-- Shaping Form -->
<form method="post" action="/">
    <div class="form-grid">
        <div class="form-group">
            <label for="interface">Select Interface:</label>
            <select name="interface" required>
                {% for iface in interfaces %}
                    <option value="{{ iface }}">{{ iface }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <label for="rate">Rate Limit (e.g., 1mbit):</label>
            <input type="text" name="rate" required>
        </div>

        <div class="form-group">
            <label for="loss">Packet Loss (%):</label>
            <input type="number" name="loss" min="0" max="100" step="0.1">
        </div>

        <div class="form-group">
            <label for="duplicate">Packet Duplication (%):</label>
            <input type="number" name="duplicate" min="0" max="100" step="0.1">
        </div>

        <div class="form-group">
            <label for="protocol">Protocol:</label>
            <select name="protocol">
                <option value="">All</option>
                <option value="tcp">TCP</option>
                <option value="udp">UDP</option>
            </select>
        </div>
    </div>

    <input type="submit" value="Apply Traffic Shaping">
</form>

    <!-- Status Form -->
    <form method="post" action="/status">
        <label for="interface">Check Interface Status:</label>
        <select name="interface" required>
            {% for iface in interfaces %}
                <option value="{{ iface }}">{{ iface }}</option>
            {% endfor %}
        </select>
        <input type="submit" value="Show Status">
    </form>

    <!-- Reset Interface Form -->
    <form method="post" action="/reset">
        <label for="interface">Reset Interface:</label>
        <select name="interface" required>
            {% for iface in interfaces %}
                <option value="{{ iface }}">{{ iface }}</option>
            {% endfor %}
        </select>
        <input type="submit" value="Reset Traffic Shaping">
    </form>

    {% if output %}
        <h2>Command Output:</h2>
        <pre>{{ output }}</pre>
    {% endif %}
</body>
</html>
